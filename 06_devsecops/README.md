# Домашнее задание к занятию «3.1. DevSecOps и AppSec». Часть 1

Пришлите ответы на вопросы в личном кабинете на сайте [netology.ru](https://netology.ru).

## Описание

Домашнее задание — лабораторная работа, в которой вы по инструкциям выполните действия.

## Задание GitLab

Это домашнее задание не обязательно для выполнения, так как для него нужна регистрация на стороннем сервисе.

В этом задании применяется сервис GitLab — один из комплексных и самых популярных решений для поддержки DevOps и DevSecOps.

Вы будете использовать пробную версию из облака для упрощения настройки и развёртывания.

Командой GitLab уже подготовлены и настроены инструменты, которые позволяют выполнять действия:
1. Анализировать код на уязвимости — SAST, включая зависимости — SCA или Dependency Scanning.
2. Анализировать контейнеры на уязвимости — Container Scanning.
3. Анализировать используемые в проекте лицензии — License Scanning.
4. Проверять секреты — Secret Detection.

Список всех проверок доступен по адресам:
* https://gitlab.com/gitlab-org/gitlab/-/tree/master/lib/gitlab/ci/templates/Security;
* https://docs.gitlab.com/ee/user/application_security/ (документация).

### Этапы выполнения

1\. Перейдите [по ссылке](https://gitlab.com/-/trial_registrations/new) и зарегистрируйте новую учётную запись. Попросит подтвердить почтовый ящик, поэтому указываем действую почту.

![](pic/register01.png)

2\. Установите значения, как на скриншоте, и нажмите кнопку `Continue`. (В полях надо указать любую страну и любой номер телефона.)

![](pic/trial1.png)

3\. Заполните данные для продолжения.

![](pic/welcome_page.png)


4\. Введите название для группы проектов.

![](pic/trial2.png)

5\. Дождитесь перехода на главную страницу. 

![](pic/start_page.png)

6\. Проверьте свой email, указанный при регистрации, и подтвердите регистрацию.

![](pic/confirm_reg.png)

7\. Нажмите на кнопку `Create new project` для создания нового проекта.

![](pic/start_page.png)

8\. Выберите `Import project` для импорта готового проекта.

![](pic/import_project.png)

9\. Нажмите на кнопку `Repository By URL` и заполните поле Git repository URL ссылкой `https://github.com/netology-code/ib-devsecops-app.git` .

![](pic/repo_by_url.png)

10\. Оставьте остальные поля заполненными по умолчанию и нажмите `Create project`.

![](pic/repo_by_url_2.png)

11\. Настройте локальные раннеры

После регистрации, для работы с пайплайнами безопасности, необходимо поставить локальные раннеры на свой компьютер
[](https://docs.gitlab.com/runner/install/)
Раннер нужен для сборки и проведения проверок безопасности.
Откройте настройки проекта, а именно настройки CI/CD.
![](pic/settings_cicd.png)
Подсказка: адрес имеет вид ```https://gitlab.com/<название группы>/<название проекта>/-/settings/ci_cd```

Внутри настроек переходим к настройкам `Runners`, и нажимем `New project Runner`. Следуем инструкции по настройке раннера windows/linux/macos (в зависимости от вашей ОС). 
![](pic/create_runner.png)

При успешной настройке, в настройках отобразится локальный раннер.
![](pic/runner_good.png)

При этом, необходимо откючить Group runners и Shared runners.
![](pic/disable_gr.png)

12\. Зайдите в пункт меню `Build` — `Pipelines` и нажмите на кнопку `Run Pipeline`.

![](pic/pipeline.png)

13\. На странице снова нажмите на кнопку `Run Pipeline`.

![](pic/run_pipeline.png)

14\. Дождитесь окончания процесса анализа.

![](pic/13_inprogress.png)

![](pic/13_finished.png)

**Примечание**. В списке задач вы увидите упавшую задачу с `retire-js`. Это нормально.

![](pic/failed-jobs.png)

![](pic/retirejs.png)

15\. Перейдите в раздел `Security & Compliance`.

![](pic/14.png)

16\. Изучите внимательно разделы:

- Vulnerability Report (отчёт об уязвимостях).
- Dependency List.
- License Compliance.

### Ответьте на вопросы:

**Важно**: после окончания проверки подождите пару минут и несколько раз обновите страницу через `Shift` + `F5`. Иногда не все данные по проверкам подтягиваются сразу. Убедитесь, что уязвимости точно найдены для приложения, зависимостей и контейнера.

**Вопросы для домашнего задания.** 

1\. Сколько уязвимостей и какого уровня значимости найдено (Severity)?

![](pic/vulnerabilities.png)

2\. Сколько из них:
- в самом приложении (SAST);
- в контейнерах (Container Scanning);
- в зависимостях (Dependency Scanning);
- секретов (Secret Detection).

3\. Какая уязвимость найдена в самом приложении?
4\. Сколько зависимостей в приложении?
5\. Сколько различного рода лицензий используется в приложении и его зависимостях?

### Решение задания

Пришлите в личном кабинете ответы на вопросы из раздела «Ответьте на следующие вопросы» и скриншот статистики со всеми найденными уязвимостями. Нужны только числа в секциях `Critical`, `High`, `Medium`, `Low`.

Не удаляйте свою учётную запись после завершения работы. Она вам понадобится на следующей лекции.

